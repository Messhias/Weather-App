(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e){e.exports={200:{label:"thunderstorm with light rain",icon:"storm-showers"},201:{label:"thunderstorm with rain",icon:"storm-showers"},202:{label:"thunderstorm with heavy rain",icon:"storm-showers"},210:{label:"light thunderstorm",icon:"storm-showers"},211:{label:"thunderstorm",icon:"thunderstorm"},212:{label:"heavy thunderstorm",icon:"thunderstorm"},221:{label:"ragged thunderstorm",icon:"thunderstorm"},230:{label:"thunderstorm with light drizzle",icon:"storm-showers"},231:{label:"thunderstorm with drizzle",icon:"storm-showers"},232:{label:"thunderstorm with heavy drizzle",icon:"storm-showers"},300:{label:"light intensity drizzle",icon:"sprinkle"},301:{label:"drizzle",icon:"sprinkle"},302:{label:"heavy intensity drizzle",icon:"sprinkle"},310:{label:"light intensity drizzle rain",icon:"sprinkle"},311:{label:"drizzle rain",icon:"sprinkle"},312:{label:"heavy intensity drizzle rain",icon:"sprinkle"},313:{label:"shower rain and drizzle",icon:"sprinkle"},314:{label:"heavy shower rain and drizzle",icon:"sprinkle"},321:{label:"shower drizzle",icon:"sprinkle"},500:{label:"light rain",icon:"rain"},501:{label:"moderate rain",icon:"rain"},502:{label:"heavy intensity rain",icon:"rain"},503:{label:"very heavy rain",icon:"rain"},504:{label:"extreme rain",icon:"rain"},511:{label:"freezing rain",icon:"rain-mix"},520:{label:"light intensity shower rain",icon:"showers"},521:{label:"shower rain",icon:"showers"},522:{label:"heavy intensity shower rain",icon:"showers"},531:{label:"ragged shower rain",icon:"showers"},600:{label:"light snow",icon:"snow"},601:{label:"snow",icon:"snow"},602:{label:"heavy snow",icon:"snow"},611:{label:"sleet",icon:"sleet"},612:{label:"shower sleet",icon:"sleet"},615:{label:"light rain and snow",icon:"rain-mix"},616:{label:"rain and snow",icon:"rain-mix"},620:{label:"light shower snow",icon:"rain-mix"},621:{label:"shower snow",icon:"rain-mix"},622:{label:"heavy shower snow",icon:"rain-mix"},701:{label:"mist",icon:"sprinkle"},711:{label:"smoke",icon:"smoke"},721:{label:"haze",icon:"day-haze"},731:{label:"sand, dust whirls",icon:"cloudy-gusts"},741:{label:"fog",icon:"fog"},751:{label:"sand",icon:"cloudy-gusts"},761:{label:"dust",icon:"dust"},762:{label:"volcanic ash",icon:"smog"},771:{label:"squalls",icon:"day-windy"},781:{label:"tornado",icon:"tornado"},800:{label:"clear sky",icon:"sunny"},801:{label:"few clouds",icon:"cloudy"},802:{label:"scattered clouds",icon:"cloudy"},803:{label:"broken clouds",icon:"cloudy"},804:{label:"overcast clouds",icon:"cloudy"},900:{label:"tornado",icon:"tornado"},901:{label:"tropical storm",icon:"hurricane"},902:{label:"hurricane",icon:"hurricane"},903:{label:"cold",icon:"snowflake-cold"},904:{label:"hot",icon:"hot"},905:{label:"windy",icon:"windy"},906:{label:"hail",icon:"hail"},951:{label:"calm",icon:"sunny"},952:{label:"light breeze",icon:"cloudy-gusts"},953:{label:"gentle breeze",icon:"cloudy-gusts"},954:{label:"moderate breeze",icon:"cloudy-gusts"},955:{label:"fresh breeze",icon:"cloudy-gusts"},956:{label:"strong breeze",icon:"cloudy-gusts"},957:{label:"high wind, near gale",icon:"cloudy-gusts"},958:{label:"gale",icon:"cloudy-gusts"},959:{label:"severe gale",icon:"cloudy-gusts"},960:{label:"storm",icon:"thunderstorm"},961:{label:"violent storm",icon:"thunderstorm"},962:{label:"hurricane",icon:"cloudy-gusts"}}},44:function(e,t,n){e.exports=n(75)},49:function(e,t,n){},50:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(34),o=n.n(i),s=(n(49),n(50),n(3)),l=n(4),c=n(6),u=n(5),h=n(7),d=n(14),m=n(10),g=n(37),v=n(38),f=n.n(v),b="http://localhost:3000/";var p=n(39),y=new(n(40).Dispatcher),w={SET_USER:"SET_USER",SET_PAGE:"SET_PAGE"},E=new(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).user=null,e.page=null,e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"change",value:function(e,t){this.emit("change"),this.emit("change_"+e,t)}},{key:"setUser",value:function(e){this.user=e,this.change("user")}},{key:"getUser",value:function(){return this.user}},{key:"setPage",value:function(e){this.page=e,this.change("page")}},{key:"getPage",value:function(){return this.page}},{key:"handleActions",value:function(e){var t=w.actions;switch(e.type){case t.SET_USER:this.setUser(e.user);break;case t.SET_PAGE:this.setPage(e.page);break;default:return e}}}]),t}(p.EventEmitter));y.register(E.handleActions.bind(E));var k=E;function O(){return JSON.parse(localStorage.getItem("logged"))||!1}function S(){localStorage.removeItem("logged")}var C={baseURL:b,withCredentials:!1,headers:{"Content-Type":"application/json","x-access-token":{toString:function(){return"".concat(k.getUser()?k.getUser().token:O().token)}}}},D=f.a.create(C);D.parseParams=function(e){return Object.keys(e).map(function(t){return[t,e[t]].map(encodeURIComponent).join("=")}).join("&")};var j=D,z=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"_onSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state,a=n.email,r=n.password;a&&r&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return j.post("login",e)}({email:a,password:r}).then(function(e){var n=e.status;if(200===(void 0===n?500:n)){var a=e.data,r=void 0===a?null:a;if(r){var i=r.auth;void 0!==i&&i&&(S(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];localStorage.setItem("logged",JSON.stringify(e))}(r),k.setUser(r),k.setPage("/home"),t.props.history.push("home"))}}else S(),k.setUser(null),t.props.history.push("/")}).catch(function(e){return console.error(e)})}},{key:"_inputOnChange",value:function(e){this.setState(Object(g.a)({},e.target.id,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-container"},r.a.createElement("form",{onSubmit:function(t){return e._onSubmit(t)}},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"username"),r.a.createElement("input",{type:"text",onChange:function(t){return e._inputOnChange(t)},id:"email",name:"name"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("input",{type:"password",onChange:function(t){return e._inputOnChange(t)},id:"password",name:"password"})),r.a.createElement("div",null,r.a.createElement("button",null,"LOGIN"))))}}]),t}(r.a.Component),_=Object(d.f)(z),M=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){j.get("logout").then(function(e){var t=e.status;200===(void 0===t?500:t)&&setInterval(window.location.href="/",8e3)}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Logout..."))}}]),t}(r.a.Component),N=n(13),T=n(41),L={Login:function(){return r.a.createElement(_,null)},Logout:M,Home:function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={countriesList:[],myLocations:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;O()||this.props.history.push("/"),j.get("home").then(function(t){var n=t.status;if(200===(void 0===n?500:n)){var a=t.data,r=void 0===a?[]:a;e.setState({myLocations:r})}}).catch(function(t){t.response.data.auth||e.props.history.push("/")})}},{key:"render",value:function(){var e=this.state.myLocations,n=void 0===e?[]:e,a=t._renderMyCurrentLocations(n);return r.a.createElement("div",{className:"home-page-container"},a,r.a.createElement("p",null,r.a.createElement(m.b,{to:"/add-location"},r.a.createElement(N.a,{icon:T.faPlus}))))}}],[{key:"_renderMyCurrentLocations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.length>0&&t.push(e.map(function(e){return r.a.createElement("p",{key:"location-link-".concat(e.city,"-").concat(e.country)},r.a.createElement(m.b,{to:"/info/".concat(e.city,"/").concat(e.country)},e.city))})),t}}]),t}(r.a.Component)},U=n(42),x=n(18),F=Date.prototype.format=function(e){for(var t="",n=Date.replaceChars,a=0;a<e.length;a++){var r=e.charAt(a);a-1>=0&&"\\"==e.charAt(a-1)?t+=r:n[r]?t+=n[r].call(this):"\\"!=r&&(t+=r)}return t};Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)},W:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),0).getDate()},L:function(){var e=this.getFullYear();return e%400==0||e%100!=0&&e%4==0},o:function(){var e=new Date(this.valueOf());return e.setDate(e.getDate()-(this.getDay()+6)%7+3),e.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},u:function(){var e=this.getMilliseconds();return(e<10?"00":e<100?"0":"")+e},e:function(){return"Not Yet Supported"},I:function(){for(var e=null,t=0;t<12;++t){var n=new Date(this.getFullYear(),t,1).getTimezoneOffset();if(null===e)e=n;else{if(n<e){e=n;break}if(n>e)break}}return this.getTimezoneOffset()==e|0},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":00"},T:function(){var e=this.getMonth();this.setMonth(0);var t=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return this.setMonth(e),t},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}};var A=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={city:!(!e.match.params||!e.match.params.city)&&e.match.params.city,country:!(!e.match.params||!e.match.params.country)&&e.match.params.country,current_time:new Date,sunrise:new Date,sunset:new Date,icon:"",weather_description:"",temperature:0},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.state,n=t.city,a=void 0!==n&&n,r=t.country;(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return j.post("weather/",e)})({city:a,country:void 0!==r&&r}).then(function(t){var n=t.status;if(200===(void 0===n?500:n)){var a=t.data,r=(void 0===a?[]:a).info,i=void 0===r?[]:r;e._treatIconData(i),e._setCurrentTime(i),e._weatherDescription(i),e._setTemperatureInfo(i),e._setSunStages(i)}}).catch(function(t){console.error(t),e.props.history.push("/")})}},{key:"_setSunStages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.sys){var t=new Date(e.sys.sunrise),n=new Date(e.sys.sunset);this.setState({sunset:n,sunrise:t})}}},{key:"_setTemperatureInfo",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.main){var n=(e=t.main.temp,parseInt(e)/10);this.setState({temperature:n})}}},{key:"_weatherDescription",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.weather.length>0&&this.setState({weather_description:e.weather[0].description})}},{key:"_setCurrentTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.dt){var t=new Date(e.dt);this.setState({current_time:t})}}},{key:"_treatIconData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.weather.length>0){var t=e.weather[0].id,n=U[t].icon;t>699&&t<800||t>899&&t<1e3||(n="day-"+n),n="wi wi-"+n,this.setState({icon:n})}}},{key:"render",value:function(){var e=this.state,t=e.icon,n=void 0===t?"":t,a=e.city,i=void 0===a?"":a,o=e.weather_description,s=void 0===o?"":o,l=e.current_time,c=void 0===l?new F:l,u=e.sunrise,h=void 0===u?new F:u,d=e.sunset,g=void 0===d?new F:d,v=e.temperature,f=void 0===v?0:v;return r.a.createElement("div",{className:"weather-info"},r.a.createElement("div",{className:"back-button"},r.a.createElement(m.b,{to:"/home"},r.a.createElement(N.a,{icon:x.faChevronLeft}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column description-row"},r.a.createElement("i",{className:"weather-icon ".concat(n)}),r.a.createElement("div",{className:"weather-description"},s)),r.a.createElement("div",{className:"column middle-row"},c.getHours(),r.a.createElement("br",null),c.getMinutes(),r.a.createElement("br",null),r.a.createElement("div",{className:"blue-highlight"},i)),r.a.createElement("div",{className:"column sun-stages"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"weather-sys-info"},r.a.createElement("i",{className:"wi wi-thermometer"})," ",f,"\u02daC")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"weather-sys-info"},r.a.createElement("i",{className:"wi wi-sunrise"}),"".concat(h.format("H:m")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"weather-sys-info"},r.a.createElement("i",{className:"wi wi-sunset"})," ","".concat(g.format("H:m")))))))}}]),t}(r.a.Component),H=n(17),I=n(43),P=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={suggestion:[],value:"",selected:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"onChange",value:function(e){var t=e.currentTarget.value,n=this.props.suggestions;if(this.setState({value:t}),""!==t){var a=n.filter(function(e){return e.capital.toLowerCase().indexOf(t.toLowerCase())>-1});this.setState({suggestions:a.slice(0,8)})}else this.setState({suggestions:[]})}},{key:"addCity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.setState({suggestions:[],value:""}),this.props.addCity(e)}},{key:"_highLightText",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t.capital.toLowerCase().indexOf(n.toLocaleLowerCase());return 0!==a?r.a.createElement("li",{key:t.id,onClick:function(){return e.addCity(t)}},t.capital.substring(0,a),r.a.createElement("span",{className:"highlight"},t.capital.substring(a,a+n.length)),t.capital.substring(a+n.length)):r.a.createElement("li",{key:t.id,onClick:function(){return e.addCity(t)}},t.capital)}},{key:"_renderSuggestionsList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r.a.createElement("div",{className:"suggestions-list"},r.a.createElement("ul",null,t.map(function(t){return e._highLightText(t,n)})))}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=void 0===n?"":n,i=t.suggestions,o=void 0===i?[]:i;return r.a.createElement("div",{className:"add-page-input"},r.a.createElement("div",{className:"arrow-right"},r.a.createElement(N.a,{icon:I.a})),r.a.createElement("input",{type:"text",value:a,onChange:function(t){return e.onChange(t)}}),this._renderSuggestionsList(o,a))}}]),t}(r.a.Component);P.defaultProps={suggestions:[]};var Y={NotFound:function(){return r.a.createElement("div",{className:"page-not-found"},r.a.createElement("div",{className:"back-button"},r.a.createElement(m.b,{to:"/home"},"<")),r.a.createElement("p",null,"Page not found."))},User:L,Location:{Info:A,Add:function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={countries:[],selected:null},n.addCity=n.addCity.bind(Object(H.a)(n)),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this._fetchCountries()}},{key:"_fetchCountries",value:function(){var e=this;j.get("countries").then(function(t){var n=t.data,a=void 0===n?[]:n;a.length>0&&e.setState({countries:a})}).catch(function(t){t.response&&(t.response.data.auth||e.props.history.push("/"))})}},{key:"_renderSelectBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.a.createElement(P,{suggestions:e,addCity:this.addCity})}},{key:"addCity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.setState({selected:e})}},{key:"_submitForm",value:function(e){var t=this;e.preventDefault();var n=this.state.selected,a=void 0===n?null:n;a&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return j.post("location/add",{data:e})}(a).then(function(e){var n=e.data;void 0!==n&&n&&t.props.history.push("/home")}).catch(function(e){e.response&&(e.response.data.auth||t.props.history.push("/"))})}},{key:"render",value:function(){var e=this,n=this.state,a=n.countries,i=void 0===a?[]:a,o=n.selected,s=void 0===o?[]:o;return 0===i.length?r.a.createElement("div",null,"Loading the view..."):r.a.createElement("div",{className:"add-page-container"},r.a.createElement("div",{className:"back-button"},r.a.createElement(m.b,{to:"/home"},r.a.createElement(N.a,{icon:x.faChevronLeft}))),r.a.createElement("form",{onSubmit:function(t){return e._submitForm(t)},className:"form-container"},this._renderSelectBox(i),t._renderSaveButton(s)))}}],[{key:"_renderSaveButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?r.a.createElement("div",null,e.capital,r.a.createElement("div",{className:"save-city-button"},r.a.createElement("button",{type:"submit"},"SAVE"))):[]}}]),t}(r.a.Component)}};var J=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"wrapper"},r.a.createElement(m.a,{basename:"#",ref:"route"},r.a.createElement(d.c,null,function(){var e={"/":Y.User.Login,"/login":Y.User.Login,"/logout":Y.User.Logout,"/home":Y.User.Home,"/info/:city/:country":Y.Location.Info,"/add-location":Y.Location.Add};return Object.keys(e).map(function(t){return r.a.createElement(d.a,{exact:!0,key:t,path:t,component:e[t]})})}(),r.a.createElement(d.a,{component:Y.NotFound}))))}}]),t}(r.a.Component);var W=function(){return r.a.createElement(J,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[44,1,2]]]);
//# sourceMappingURL=main.79ca3080.chunk.js.map